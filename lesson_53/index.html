<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<div>
    <input type="text" id="number"/><span>
    <button onclick="search()">Find</button></span>
</div>

<table class="table">
    <thead class="thead-inverse">
    <tr>
        <td>Имя</td>
        <td>Эпизоды</td>
        <td>Вид</td>
        <td>Язык</td>
        <td>Другие представители этого вида</td>
    </tr>
    </thead>
    <tbody id="user-table">
    </tbody>
</table>

<script type="text/javascript">



function search(){
	var REQid = document.getElementById("number").value;
	// alert(REQid);
	if (REQid < 1 || REQid > 87) {
		alert("Person with id: " + REQid + " is not found");
		return;
	}


fetch("http://swapi.co/api/people/"+REQid)
	// .then(response => response.json())
	.then(function (response) {
            return response.json();
        })
	.then(function (userList) {
            fillTable(userList);
        })
	.catch(error => console.error(error));
	// .then(resp => {
 //    console.log(resp)
	// return fetch(resp.homeworld);
	// })
	
	// .then(r => r.json())
	// .then(data => {
	// 	console.log(data)

	// 	let homeworld = data.name;

	// 	let residents = data.residents.map(residentUrl => fetch(residentUrl)
	// 		.then(resp => resp.json())
	// 		.catch(e => console.error(e))
	// 		);

	// 	return {planetName: homeworld, residents: Promise.all(residents)};
	// })
	// .then(data => {

	// 	let persons = data.residents
	// 	.then(resp => {
	// 		console.log(resp)
	// 		return resp;
	// 	})
	// 	.then(arr => arr.find(person => person.name === "C-3PO"))
	// 	.then(robot => console.log(robot))
	// 	// .then(arr => arr
	// 	// 	.map(person => person.name)
	// 	// 	.join()
	// 	// 	)
	// 	// .then(persons => console.log(data.planetName + ": ", persons));
		
	// })
	// .catch(error => console.error(error));


}


function fillTable(userList) {
    var userTable = document.getElementById("user-table");

    // clearTable(userTable);

    userList.forEach(function (user) {
        var row = userTable.insertRow();

        var name = row.insertCell(1);
        var epizods = row.insertCell(2);
        var vid = row.insertCell(3);
        // var yazik = row.insertCell(4);
        // var drugiePrestaviteli = row.insertCell(5);


        name.innerHTML = user.name;
        epizods.innerHTML = user.films;
        vid.innerHTML = user.gender;
        // yazik.innerHTML = user.phone;
        // drugiePrestaviteli.innerHTML = user.email;
    });
}




	
</script>

</body>
</html>