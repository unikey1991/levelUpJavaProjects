<!DOCTYPE html>
<html>
<head>
    <title>Rating</title>
</head>
<body>

    <style type="text/css">
        div.stars {
          width: 270px;
          display: inline-block;
      }

      input.star { display: none; }


      img.raiting {
        height: 25px;
        width: 25px;
    }

    label.star {
      float: right;
      padding: 10px;
      font-size: 36px;
      transition: all .3s;
  }

  label.star:hover { transform: rotate(25deg) scale(1.5); }
</style>
<div class="stars">
    <span>
        <label class="star star-5" for="star-5">
            <img data-id="5" onclick="changeState(this)" class="raiting" src="star-inactive.jpg">
        </label>
        <input class="star star-5" id="star-5" type="radio" name="star"/>
    </span>
    <span>
        <label class="star star-4" for="star-4">
            <img data-id="4" onclick="changeState(this)" class="raiting" src="star-inactive.jpg">
        </label>
        <input class="star star-4" id="star-4" type="radio" name="star"/>
    </span>
    <span>
        <label class="star star-3" for="star-3">
            <img data-id="3" onclick="changeState(this)" class="raiting" src="star-inactive.jpg">
        </label>
        <input class="star star-3" id="star-3" type="radio" name="star"/>
    </span>
    <span>
        <label class="star star-2" for="star-2">
            <img data-id="2" onclick="changeState(this)" class="raiting" src="star-inactive.jpg">
        </label>
        <input class="star star-2" id="star-2" type="radio" name="star"/>
    </span>
    <span>
        <label class="star star-1" for="star-1">
            <img data-id="1" onclick="changeState(this)" class="raiting" src="star-inactive.jpg">
        </label>
        <input class="star star-1" id="star-1" type="radio" name="star"/>
    </span>
</div>
<div>
    <img id="img1" hidden="true" src="http://cdn01.ru/files/users/images/9b/c0/9bc06f45357b47cdcb7158aecfbd38da.jpg">
</div>

<script type="text/javascript">
    var lastRaiting = null;

    function changeState(star) {
        // console.log(star);
        // console.log(star.dataset.id);

        setRaiting(star.dataset.id);
    }

    function setRaiting(raiting) {
        let stars = document.querySelectorAll('img.raiting');
        var img = document.getElementById("img1");

        for(let i = stars.length-1; i >=0; i--) {
            let star = stars[i];

            if(star.dataset.id <= raiting && raiting != lastRaiting) {
                star.src = "star-active.jpg";
                star.setAttribute("checked", true);
            } else {
                star.src = "star-inactive.jpg";
                star.removeAttribute("checked");
            }
        }
        if (raiting < 5) {
            img.src = "http://cdn01.ru/files/users/images/9b/c0/9bc06f45357b47cdcb7158aecfbd38da.jpg";
img.removeAttribute("hidden");

        } else {
            img.src = "http://memesmix.net/media/created/luroer.png";
        }
        
        if(raiting == lastRaiting) {
            lastRaiting = null;
        } else lastRaiting = raiting;
    }

</script>

</body>
</html>